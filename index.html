<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>graphene-pk11</title>
	<meta name="description" content="Documentation for graphene-pk11">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">graphene-pk11</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>graphene-pk11</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#graphene" id="graphene" style="color: inherit; text-decoration: none;">
					<h1>Graphene</h1>
				</a>
				<p><a href="https://raw.githubusercontent.com/PeculiarVentures/graphene/master/LICENSE"><img src="https://img.shields.io/badge/license-MIT-green.svg?style=flat" alt="license"></a>
					<img src="https://github.com/PeculiarVentures/graphene/workflows/test/badge.svg" alt="test">
					<a href="https://coveralls.io/github/PeculiarVentures/graphene?branch=master"><img src="https://coveralls.io/repos/github/PeculiarVentures/graphene/badge.svg?branch=master" alt="Coverage Status"></a>
				<a href="https://badge.fury.io/js/graphene-pk11"><img src="https://badge.fury.io/js/graphene-pk11.svg" alt="npm version"></a></p>
				<p><a href="https://nodei.co/npm/graphene-pk11/"><img src="https://nodei.co/npm/graphene-pk11.png" alt="NPM"></a></p>
				<p>A simple layer for interacting with PKCS #11 / PKCS11 / CryptoKI for Node in TypeScript</p>
				<p>PKCS #11 (also known as CryptoKI or PKCS11) is the standard interface for interacting with hardware crypto devices such as Smart Cards and Hardware Security Modules (HSMs). It wraps the library closely, but uses attempts to look like &#39;node.crypto&#39; where it makes sense. </p>
				<p>It has been tested with :</p>
				<ul>
					<li><a href="https://www.opendnssec.org/softhsm/">SoftHSM2</a></li>
					<li><a href="https://www.thales-esecurity.com/products-and-services/products-and-services/hardware-security-modules/general-purpose-hsms/nshield-solo">Thales nShield Solo+</a></li>
					<li><a href="http://www.safenet-inc.com/">Safenet Luna HSMs</a></li>
					<li><a href="http://www.rutoken.ru/">RuToken</a></li>
				</ul>
				<p>We have also created a basic <a href="https://github.com/PeculiarVentures/graphene-cli">CLI</a> for interacting with PKCS#11 devices based on this library we call <a href="https://github.com/PeculiarVentures/graphene-cli">graphene-cli</a>.</p>
				<p><strong>NOTE:</strong> For testing purposes it may be easier to work with SoftHSM2 which is a software implementation of PKCS#11 based on OpenSSL or Botan.</p>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">).</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;password&quot;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Get a number of private key objects on token</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">find</span><span style="color: #000000">({</span><span style="color: #001080">class:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">.</span><span style="color: #0070C1">PRIVATE_KEY</span><span style="color: #000000">}).</span><span style="color: #001080">length</span><span style="color: #000000">);</span>

<span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code><span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">-</span><span style="color: #001080">pk11</span>
</code></pre>
				<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
					<h2>Documentation</h2>
				</a>
				<p><a href="https://peculiarventures.github.io/graphene/">https://peculiarventures.github.io/graphene/</a></p>
				<a href="#using-the-package" id="using-the-package" style="color: inherit; text-decoration: none;">
					<h2>Using the Package</h2>
				</a>
				<p>Install the package</p>
				<pre><code><span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">-</span><span style="color: #001080">pk11</span><span style="color: #000000"> --</span><span style="color: #001080">save</span>
</code></pre>
				<p>Install TypeScript definition using <a href="https://www.npmjs.com/package/tsd">TSD</a> package manager</p>
				<pre><code><span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">tsd</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">-</span><span style="color: #001080">pk11</span><span style="color: #000000"> --</span><span style="color: #001080">save</span>
</code></pre>
				<p>Load module</p>
				<pre><code class="language-javascript"><span style="color: #008000">// file.js</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
</code></pre>
				<a href="#install-softhsm2" id="install-softhsm2" style="color: inherit; text-decoration: none;">
					<h3>Install SoftHSM2</h3>
				</a>
				<ul>
					<li>For OSX see the <a href="https://github.com/opendnssec/SoftHSMv2/blob/develop/OSX-NOTES.md">instructions here</a></li>
					<li>For linux <a href="https://github.com/opendnssec/SoftHSMv2/blob/develop/README.md">instructions here</a></li>
				</ul>
				<a href="#examples" id="examples" style="color: inherit; text-decoration: none;">
					<h2>Examples</h2>
				</a>
				<a href="#listing-capabilities" id="listing-capabilities" style="color: inherit; text-decoration: none;">
					<h3>Listing capabilities</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>
<span style="color: #008000">// get slots</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slots</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #0000FF">true</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slots</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #001080">slots</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">slots</span><span style="color: #000000">.</span><span style="color: #795E26">items</span><span style="color: #000000">(</span><span style="color: #001080">i</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot #&quot;</span><span style="color: #000000"> + </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">handle</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Description:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">slotDescription</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Serial:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">getToken</span><span style="color: #000000">().</span><span style="color: #001080">serialNumber</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Password(min/max): %d/%d&quot;</span><span style="color: #000000">, </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">getToken</span><span style="color: #000000">().</span><span style="color: #001080">minPinLen</span><span style="color: #000000">, </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">getToken</span><span style="color: #000000">().</span><span style="color: #001080">maxPinLen</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Is hardware:&quot;</span><span style="color: #000000">, !!(</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">HW_SLOT</span><span style="color: #000000">));</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Is removable:&quot;</span><span style="color: #000000">, !!(</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">REMOVABLE_DEVICE</span><span style="color: #000000">));</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\t</span><span style="color: #A31515">Is initialized:&quot;</span><span style="color: #000000">, !!(</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">));</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;</span><span style="color: #EE0000">\n\n</span><span style="color: #A31515">Mechanisms:&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Name                       h/s/v/e/d/w/u&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;========================================&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">v</span><span style="color: #000000">) {</span>
<span style="color: #000000">            </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> ? </span><span style="color: #A31515">&quot;+&quot;</span><span style="color: #000000"> : </span><span style="color: #A31515">&quot;-&quot;</span><span style="color: #000000">;</span>
<span style="color: #000000">        }</span>

<span style="color: #000000">        </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">s</span><span style="color: #000000">(</span><span style="color: #001080">v</span><span style="color: #000000">) {</span>
<span style="color: #000000">            </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">();</span>
<span style="color: #000000">            </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i_1</span><span style="color: #000000"> = </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">; </span><span style="color: #001080">i_1</span><span style="color: #000000"> &lt; </span><span style="color: #098658">27</span><span style="color: #000000">; </span><span style="color: #001080">i_1</span><span style="color: #000000">++) {</span>
<span style="color: #000000">                </span><span style="color: #001080">v</span><span style="color: #000000"> += </span><span style="color: #A31515">&quot; &quot;</span><span style="color: #000000">;</span>
<span style="color: #000000">            }</span>
<span style="color: #000000">            </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000">;</span>
<span style="color: #000000">        }</span>

<span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mechs</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">getMechanisms</span><span style="color: #000000">();</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">j</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">j</span><span style="color: #000000"> &lt; </span><span style="color: #001080">mechs</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">; </span><span style="color: #001080">j</span><span style="color: #000000">++) {</span>
<span style="color: #000000">            </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mech</span><span style="color: #000000"> = </span><span style="color: #001080">mechs</span><span style="color: #000000">.</span><span style="color: #795E26">items</span><span style="color: #000000">(</span><span style="color: #001080">j</span><span style="color: #000000">);</span>
<span style="color: #000000">            </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #795E26">s</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">) +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">DIGEST</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">SIGN</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">VERIFY</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">ENCRYPT</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">DECRYPT</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">WRAP</span><span style="color: #000000">) + </span><span style="color: #A31515">&quot;/&quot;</span><span style="color: #000000"> +</span>
<span style="color: #000000">                </span><span style="color: #795E26">b</span><span style="color: #000000">(</span><span style="color: #001080">mech</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">MechanismFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">UNWRAP</span><span style="color: #000000">));</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<p>####Output</p>
				<pre><code><span style="color: #001080">Slot</span><span style="color: #000000"> #</span><span style="color: #098658">0</span>
<span style="color: #000000">    Description: </span><span style="color: #001080">SoftHSM</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> </span><span style="color: #098658">0</span>
<span style="color: #000000">    Serial: </span><span style="color: #001080">f89e34b310e83df2</span>
<span style="color: #000000">    </span><span style="color: #795E26">Password</span><span style="color: #000000">(</span><span style="color: #001080">min</span><span style="color: #000000">/</span><span style="color: #001080">max</span><span style="color: #000000">): </span><span style="color: #098658">4</span><span style="color: #000000">/</span><span style="color: #098658">255</span>
<span style="color: #000000">    </span><span style="color: #001080">Is</span><span style="color: #000000"> hardware: </span><span style="color: #0000FF">false</span>
<span style="color: #000000">    </span><span style="color: #001080">Is</span><span style="color: #000000"> removable: </span><span style="color: #0000FF">false</span>
<span style="color: #000000">    </span><span style="color: #001080">Is</span><span style="color: #000000"> initialized: </span><span style="color: #0000FF">true</span>
<span style="color: #000000">Mechanisms:</span>
<span style="color: #001080">Name</span><span style="color: #000000">                       </span><span style="color: #001080">h</span><span style="color: #000000">/</span><span style="color: #001080">s</span><span style="color: #000000">/</span><span style="color: #001080">v</span><span style="color: #000000">/</span><span style="color: #001080">e</span><span style="color: #000000">/</span><span style="color: #001080">d</span><span style="color: #000000">/</span><span style="color: #001080">w</span><span style="color: #000000">/</span><span style="color: #001080">u</span>
<span style="color: #000000">========================================</span>
<span style="color: #0070C1">MD5</span><span style="color: #000000">                        +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA_1</span><span style="color: #000000">                      +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA224</span><span style="color: #000000">                     +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA256</span><span style="color: #000000">                     +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA384</span><span style="color: #000000">                     +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA512</span><span style="color: #000000">                     +</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">MD5_HMAC</span><span style="color: #000000">                   -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA_1_HMAC</span><span style="color: #000000">                 -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA224_HMAC</span><span style="color: #000000">                -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA256_HMAC</span><span style="color: #000000">                -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA384_HMAC</span><span style="color: #000000">                -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA512_HMAC</span><span style="color: #000000">                -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">RSA_PKCS_KEY_PAIR_GEN</span><span style="color: #000000">      -</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">RSA_PKCS</span><span style="color: #000000">                   -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span>
<span style="color: #0070C1">RSA_X_509</span><span style="color: #000000">                  -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">MD5_RSA_PKCS</span><span style="color: #000000">               -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">SHA1_RSA_PKCS</span><span style="color: #000000">              -</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span>
<span style="color: #0070C1">RSA_PKCS_OAEP</span><span style="color: #000000">              -</span><span style="color: #811F3F">/-/</span><span style="color: #000000">-</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span><span style="color: #811F3F">/</span><span style="color: #000000">+</span>
</code></pre>
				<a href="#hashing" id="hashing" style="color: inherit; text-decoration: none;">
					<h3>Hashing</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">digest</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">createDigest</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;sha1&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">digest</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 1&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">digest</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 2&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">hash</span><span style="color: #000000"> = </span><span style="color: #001080">digest</span><span style="color: #000000">.</span><span style="color: #795E26">final</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Hash SHA1:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">hash</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">)); </span><span style="color: #008000">// Hash SHA1: e1dc1e52e9779cd69679b3e0af87d2e288190d34 </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#generating-keys" id="generating-keys" style="color: inherit; text-decoration: none;">
					<h3>Generating keys</h3>
				</a>
				<a href="#aes" id="aes" style="color: inherit; text-decoration: none;">
					<h4>AES</h4>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">k</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKey</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">AES</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;class&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">.</span><span style="color: #0070C1">SECRET_KEY</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;token&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;valueLen&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #098658">256</span><span style="color: #000000"> / </span><span style="color: #098658">8</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;keyType&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">AES</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;label&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;My AES secret key&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;private&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Key.handle:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">k</span><span style="color: #000000">.</span><span style="color: #001080">handle</span><span style="color: #000000">);                 </span><span style="color: #008000">// Key.handle: 2</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Key.type:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">[</span><span style="color: #001080">k</span><span style="color: #000000">.</span><span style="color: #001080">type</span><span style="color: #000000">]);   </span><span style="color: #008000">// Key.type: AES</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#ecc" id="ecc" style="color: inherit; text-decoration: none;">
					<h4>ECC</h4>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// generate ECDSA key pair</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">keys</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKeyPair</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">verify:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">paramsECDSA:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">NamedCurve</span><span style="color: #000000">.</span><span style="color: #795E26">getByName</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;secp192r1&quot;</span><span style="color: #000000">).</span><span style="color: #001080">value</span>
<span style="color: #000000">    }, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">sign:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Key type:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">[</span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">privateKey</span><span style="color: #000000">.</span><span style="color: #001080">type</span><span style="color: #000000">]);            </span><span style="color: #008000">// Key type: ECDSA</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Object&#039;s class:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">[</span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">privateKey</span><span style="color: #000000">.</span><span style="color: #001080">class</span><span style="color: #000000">]); </span><span style="color: #008000">// Object&#039;s class: PRIVATE_KEY </span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#exporting-public-key" id="exporting-public-key" style="color: inherit; text-decoration: none;">
					<h3>Exporting public key</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// generate RSA key pair</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">keys</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKeyPair</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">modulusBits:</span><span style="color: #000000"> </span><span style="color: #098658">1024</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">publicExponent:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">([</span><span style="color: #098658">3</span><span style="color: #000000">]),</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">verify:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">encrypt:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">wrap:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    }, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">sign:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">decrypt:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">unwrap:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// get public key attributes</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">pubKey</span><span style="color: #000000"> = </span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">publicKey</span><span style="color: #000000">.</span><span style="color: #795E26">getAttribute</span><span style="color: #000000">({</span>
<span style="color: #000000">        </span><span style="color: #001080">modulus:</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">publicExponent:</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// convert values to base64</span>
<span style="color: #000000">    </span><span style="color: #001080">pubKey</span><span style="color: #000000">.</span><span style="color: #001080">modulus</span><span style="color: #000000"> = </span><span style="color: #001080">pubKey</span><span style="color: #000000">.</span><span style="color: #001080">modulus</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;base64&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">pubKey</span><span style="color: #000000">.</span><span style="color: #001080">publicExponent</span><span style="color: #000000"> = </span><span style="color: #001080">pubKey</span><span style="color: #000000">.</span><span style="color: #001080">publicExponent</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;base64&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #267F99">JSON</span><span style="color: #000000">.</span><span style="color: #795E26">stringify</span><span style="color: #000000">(</span><span style="color: #001080">pubKey</span><span style="color: #000000">, </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">));</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>

<span style="color: #008000">/*</span>
<span style="color: #008000">  Result</span>
<span style="color: #008000">  ------------------</span>
<span style="color: #008000">  </span>
<span style="color: #008000">  {</span>
<span style="color: #008000">      &quot;modulus&quot;: &quot;21HTpGsKn3lQh4fqhYkZ/NprzKZqCnUIs0Ekbg8Y0M0Er4yJ4tKVFLlaxUkym6nRBQuS2tzwSQcvuKVUNeK3k6AiPitlQs5CRc8csqL6BYMU+rme3L0w/d+1OryH/pMrDGOmkWXTrzBWoRgulXHX92jK6CcXKBeS/yUSgCLP/MM=&quot;,</span>
<span style="color: #008000">      &quot;publicExponent&quot;: &quot;Aw==&quot;</span>
<span style="color: #008000">  }</span>

<span style="color: #008000">*/</span>
</code></pre>
				<a href="#signing--verifying" id="signing--verifying" style="color: inherit; text-decoration: none;">
					<h3>Signing / Verifying</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// generate RSA key pair</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">keys</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKeyPair</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">modulusBits:</span><span style="color: #000000"> </span><span style="color: #098658">1024</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">publicExponent:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">([</span><span style="color: #098658">3</span><span style="color: #000000">]),</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">verify:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">encrypt:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">wrap:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    }, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">RSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">sign:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">decrypt:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">unwrap:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// sign content</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">sign</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">createSign</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;SHA1_RSA_PKCS&quot;</span><span style="color: #000000">, </span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">privateKey</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">sign</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 1&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">sign</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 2&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">signature</span><span style="color: #000000"> = </span><span style="color: #001080">sign</span><span style="color: #000000">.</span><span style="color: #795E26">final</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Signature RSA-SHA1:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">signature</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">)); </span><span style="color: #008000">// Signature RSA-SHA1: 6102a66dc0d97fadb5...</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// verify content</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">verify</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">createVerify</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;SHA1_RSA_PKCS&quot;</span><span style="color: #000000">, </span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">publicKey</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">verify</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 1&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">verify</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;simple text 2&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">verify_result</span><span style="color: #000000"> = </span><span style="color: #001080">verify</span><span style="color: #000000">.</span><span style="color: #795E26">final</span><span style="color: #000000">(</span><span style="color: #001080">signature</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Signature RSA-SHA1 verify:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">verify_result</span><span style="color: #000000">);      </span><span style="color: #008000">// Signature RSA-SHA1 verify: true</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#encrypting--decrypting" id="encrypting--decrypting" style="color: inherit; text-decoration: none;">
					<h3>Encrypting / Decrypting</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #008000">// generate AES key</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">key</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKey</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">AES</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;class&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">.</span><span style="color: #0070C1">SECRET_KEY</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;token&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;valueLen&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #098658">256</span><span style="color: #000000"> / </span><span style="color: #098658">8</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;keyType&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">AES</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;label&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;My AES secret key&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;encrypt&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;decrypt&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// enc algorithm</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">alg</span><span style="color: #000000"> = {</span>
<span style="color: #000000">        </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;AES_CBC_PAD&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">params:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">6</span><span style="color: #000000">, </span><span style="color: #098658">7</span><span style="color: #000000">, </span><span style="color: #098658">8</span><span style="color: #000000">, </span><span style="color: #098658">9</span><span style="color: #000000">, </span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">, </span><span style="color: #098658">6</span><span style="color: #000000">]) </span><span style="color: #008000">// IV</span>
<span style="color: #000000">    };</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #0070C1">MESSAGE</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;Encrypted message&quot;</span><span style="color: #000000">;</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// encrypting</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">cipher</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">createCipher</span><span style="color: #000000">(</span><span style="color: #001080">alg</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">enc</span><span style="color: #000000"> = </span><span style="color: #001080">cipher</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #0070C1">MESSAGE</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">enc</span><span style="color: #000000"> = </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">concat</span><span style="color: #000000">([</span><span style="color: #001080">enc</span><span style="color: #000000">, </span><span style="color: #001080">cipher</span><span style="color: #000000">.</span><span style="color: #795E26">final</span><span style="color: #000000">()]);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Enc:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">enc</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">));           </span><span style="color: #008000">// Enc: eb21e15b896f728a4...</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// decrypting</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">decipher</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">createDecipher</span><span style="color: #000000">(</span><span style="color: #001080">alg</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">dec</span><span style="color: #000000"> = </span><span style="color: #001080">decipher</span><span style="color: #000000">.</span><span style="color: #795E26">update</span><span style="color: #000000">(</span><span style="color: #001080">enc</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">msg</span><span style="color: #000000"> = </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">concat</span><span style="color: #000000">([</span><span style="color: #001080">dec</span><span style="color: #000000">, </span><span style="color: #001080">decipher</span><span style="color: #000000">.</span><span style="color: #795E26">final</span><span style="color: #000000">()]).</span><span style="color: #795E26">toString</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Message:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">());            </span><span style="color: #008000">// Message: Encrypted message</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#derive-key" id="derive-key" style="color: inherit; text-decoration: none;">
					<h3>Derive key</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #008000">// generate EC key</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">keys</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">generateKeyPair</span><span style="color: #000000">(</span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyGenMechanism</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">derive:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">paramsECDSA:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">NamedCurve</span><span style="color: #000000">.</span><span style="color: #795E26">getByName</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;secp192r1&quot;</span><span style="color: #000000">).</span><span style="color: #001080">value</span>
<span style="color: #000000">    }, {</span>
<span style="color: #000000">        </span><span style="color: #001080">keyType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">ECDSA</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">derive:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    });</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// derive algorithm</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">alg</span><span style="color: #000000"> = {</span>
<span style="color: #000000">        </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;ECDH1_DERIVE&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">params:</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #795E26">EcdhParams</span><span style="color: #000000">(</span>
<span style="color: #000000">            </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">EcKdf</span><span style="color: #000000">.</span><span style="color: #0070C1">SHA1</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">publicKey</span><span style="color: #000000">.</span><span style="color: #795E26">getAttribute</span><span style="color: #000000">({</span><span style="color: #001080">pointEC:</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000">}).</span><span style="color: #001080">pointEC</span><span style="color: #000000">)</span>
<span style="color: #000000">        };</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// Template for derived key</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">template</span><span style="color: #000000"> = {</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;class&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">.</span><span style="color: #0070C1">SECRET_KEY</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;token&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;keyType&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">KeyType</span><span style="color: #000000">.</span><span style="color: #0070C1">AES</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;valueLen&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #098658">256</span><span style="color: #000000"> / </span><span style="color: #098658">8</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;encrypt&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&quot;decrypt&quot;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #008000">// Key derivation</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">dKey</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">deriveKey</span><span style="color: #000000">(</span><span style="color: #001080">alg</span><span style="color: #000000">, </span><span style="color: #001080">keys</span><span style="color: #000000">.</span><span style="color: #001080">privateKey</span><span style="color: #000000">, </span><span style="color: #001080">template</span><span style="color: #000000">)</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Derived key handle:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">dKey</span><span style="color: #000000">.</span><span style="color: #001080">handle</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Slot is not initialized&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#change-user39s-pin" id="change-user39s-pin" style="color: inherit; text-decoration: none;">
					<h3>Change User&#39;s PIN</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>
<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Module</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">lib</span><span style="color: #000000"> = </span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #001080">lib</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #AF00DB">try</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #001080">flags</span><span style="color: #000000"> &amp; </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">SlotFlag</span><span style="color: #000000">.</span><span style="color: #0070C1">TOKEN_PRESENT</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">();</span>
<span style="color: #000000">        </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">, </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">UserType</span><span style="color: #000000">.</span><span style="color: #0070C1">USER</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">setPin</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;12345&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;new pin&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">logout</span><span style="color: #000000">();</span>
<span style="color: #000000">        </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">close</span><span style="color: #000000">();</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;User&#039;s PIN was changed successfully&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">}</span>
<span style="color: #AF00DB">catch</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>
<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#adding-x509-certificate" id="adding-x509-certificate" style="color: inherit; text-decoration: none;">
					<h3>Adding x509 certificate</h3>
				</a>
				<pre><code class="language-javascript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">graphene</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;graphene-pk11&quot;</span><span style="color: #000000">);</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">mod</span><span style="color: #000000"> = </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;/usr/local/lib/softhsm/libsofthsm2.so&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;SoftHSM&quot;</span><span style="color: #000000">);</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span>

<span style="color: #AF00DB">try</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">slot</span><span style="color: #000000"> = </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">getSlots</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">session</span><span style="color: #000000"> = </span><span style="color: #001080">slot</span><span style="color: #000000">.</span><span style="color: #795E26">open</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000"> | </span><span style="color: #098658">4</span><span style="color: #000000">)</span>
<span style="color: #000000">    </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">login</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;password&quot;</span><span style="color: #000000">);</span>

<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">template</span><span style="color: #000000"> = {</span>
<span style="color: #000000">        </span><span style="color: #001080">class:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">ObjectClass</span><span style="color: #000000">.</span><span style="color: #0070C1">CERTIFICATE</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">certType:</span><span style="color: #000000"> </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">CertificateType</span><span style="color: #000000">.</span><span style="color: #0070C1">X_509</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">private:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">token:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">, </span><span style="color: #098658">5</span><span style="color: #000000">]), </span><span style="color: #008000">// Should be the same as Private/Public key has</span>
<span style="color: #000000">        </span><span style="color: #001080">label:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;My certificate&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">subject:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;3034310B300906035504...&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">),</span>
<span style="color: #000000">        </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #001080">Buffer</span><span style="color: #000000">.</span><span style="color: #795E26">from</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;308203A830820290A003...&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">),</span>
<span style="color: #000000">    };</span>

<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">objCert</span><span style="color: #000000"> = </span><span style="color: #001080">session</span><span style="color: #000000">.</span><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #001080">template</span><span style="color: #000000">).</span><span style="color: #795E26">toType</span><span style="color: #000000">();</span>

<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Certificate: created</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Certificate info:</span><span style="color: #EE0000">\n</span><span style="color: #A31515">===========================&quot;</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Handle:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">handle</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">));</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;ID:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">));</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Label:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">label</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;category:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">graphene</span><span style="color: #000000">.</span><span style="color: #001080">CertificateCategory</span><span style="color: #000000">[</span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">category</span><span style="color: #000000">]);</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Subject:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">subject</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">));</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;Value:&quot;</span><span style="color: #000000">, </span><span style="color: #001080">objCert</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;hex&quot;</span><span style="color: #000000">));</span>
<span style="color: #000000">} </span><span style="color: #AF00DB">catch</span><span style="color: #000000"> (</span><span style="color: #001080">err</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #001080">err</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#initializing-nss-crypto-library" id="initializing-nss-crypto-library" style="color: inherit; text-decoration: none;">
					<h3>Initializing NSS crypto library</h3>
				</a>
				<p>Use <code>options</code> parameter for <code>Module::initialize</code> method.</p>
				<p><strong>Type</strong></p>
				<pre><code class="language-ts"><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">InitializationOptions</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #008000">/**</span>
<span style="color: #008000">     * NSS library parameters</span>
<span style="color: #008000">     */</span>
<span style="color: #000000">    </span><span style="color: #001080">libraryParameters</span><span style="color: #000000">?: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span>
<span style="color: #000000">    </span><span style="color: #008000">/**</span>
<span style="color: #008000">     * bit flags specifying options for `C_Initialize`</span>
<span style="color: #008000">     * - CKF_LIBRARY_CANT_CREATE_OS_THREADS. True if application threads which are executing calls to the library</span>
<span style="color: #008000">     *   may not use native operating system calls to spawn new threads; false if they may</span>
<span style="color: #008000">     * - CKF_OS_LOCKING_OK. True if the library can use the native operation system threading model for locking;</span>
<span style="color: #008000">     *   false otherwise</span>
<span style="color: #008000">     */</span>
<span style="color: #000000">    </span><span style="color: #001080">flags</span><span style="color: #000000">?: </span><span style="color: #267F99">number</span><span style="color: #000000">;</span>
<span style="color: #000000">}</span>
</code></pre>
				<p><strong>Code</strong></p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">mod</span><span style="color: #000000"> = </span><span style="color: #001080">Module</span><span style="color: #000000">.</span><span style="color: #795E26">load</span><span style="color: #000000">(</span><span style="color: #A31515">&quot;/usr/local/opt/nss/lib/libsoftokn3.dylib&quot;</span><span style="color: #000000">, </span><span style="color: #A31515">&quot;NSS&quot;</span><span style="color: #000000">);</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #001080">libraryParameters:</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;configdir=&#039;&#039; certPrefix=&#039;&#039; keyPrefix=&#039;&#039; secmod=&#039;&#039; flags=readOnly,noCertDB,noModDB,forceOpen,optimizeSpace&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">});</span>

<span style="color: #008000">// Your code here</span>

<span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #795E26">finalize</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#developing" id="developing" style="color: inherit; text-decoration: none;">
					<h2>Developing</h2>
				</a>
				<p>Use npm command to publish graphene-pk11 module</p>
				<pre><code><span style="color: #000000">&gt; </span><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">pub</span>
</code></pre>
				<a href="#suitability" id="suitability" style="color: inherit; text-decoration: none;">
					<h2>Suitability</h2>
				</a>
				<p>At this time this solution should be considered suitable for research and experimentation, further code and security review is needed before utilization in a production application.</p>
				<a href="#bug-reporting" id="bug-reporting" style="color: inherit; text-decoration: none;">
					<h2>Bug Reporting</h2>
				</a>
				<p>Please report bugs either as pull requests or as issues in the issue tracker. Graphene has a full disclosure vulnerability policy. Please do NOT attempt to report any security vulnerability in this code privately to anybody.</p>
				<a href="#todo" id="todo" style="color: inherit; text-decoration: none;">
					<h2>TODO</h2>
				</a>
				<ul>
					<li>Add tests to the library</li>
					<li>Add additional capabilities to CLI (device initialization, file signing, file encryption, etc)</li>
				</ul>
				<a href="#related" id="related" style="color: inherit; text-decoration: none;">
					<h2>Related</h2>
				</a>
				<ul>
					<li><a href="http://docs.oasis-open.org/pkcs11/pkcs11-curr/v2.40/pkcs11-curr-v2.40.html">PKCS #11 2.40 Specification</a></li>
					<li><a href="http://www.cryptsoft.com/pkcs11doc/">Many PKCS #11 Specifications</a></li>
					<li><a href="https://github.com/dotse/p5-crypt-pkcs11">PERL PKCS #11 binding</a></li>
					<li><a href="https://github.com/jariq/Pkcs11Interop">.NET PKCS #11 binding</a></li>
					<li><a href="https://github.com/larskanis/pkcs11">Ruby PKCS #11 binding</a></li>
					<li><a href="https://github.com/ANSSI-FR/caml-crush">OCaml PKCS #11 binding</a></li>
					<li><a href="https://github.com/ANSSI-FR/opkcs11-tool">OCaml PKCS #11 CLI</a></li>
					<li><a href="https://github.com/miekg/pkcs11">Go PKCS #11 binding</a> </li>
					<li><a href="http://www.pkcs11admin.net">PKCS #11 Admin</a></li>
					<li><a href="https://github.com/node-ffi/node-ffi">Node.js Foreign Function Interface</a></li>
					<li><a href="https://github.com/romanovskiy-k/pkcs11/blob/master/rtpkcs11t.h">GOST PKCS#11 constants</a></li>
					<li><a href="https://github.com/jariq/pkcs11-logger">PKCS#11 logging proxy module</a></li>
					<li><a href="https://github.com/iksaif/pkcs11-proxy">PKCS#11 Proxy</a></li>
					<li><a href="https://github.com/google/pkcs11test">PKCS#11 Tests</a></li>
					<li><a href="http://sourceforge.net/projects/opencryptoki/">OpenCryptoKi</a></li>
					<li><a href="https://www.opendnssec.org/softhsm/">SoftHSM</a></li>
					<li><a href="https://github.com/disig/SoftHSM2-for-Windows/">SoftHSM2 for Windows</a></li>
					<li><a href="https://github.com/santigimeno/node-pcsclite">node-pcsc</a></li>
					<li><a href="https://tools.ietf.org/html/rfc7512">PKCS#11 URIs</a></li>
					<li><a href="http://www.keylength.com/en/compare/">Key Length Recommendations</a></li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum">
						<a href="enums/certificatecategory.html" class="tsd-kind-icon">Certificate<wbr>Category</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/certificatetype.html" class="tsd-kind-icon">Certificate<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/eckdf.html" class="tsd-kind-icon">Ec<wbr>Kdf</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/javamidp.html" class="tsd-kind-icon">JavaMIDP</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/keygenmechanism.html" class="tsd-kind-icon">Key<wbr>Gen<wbr>Mechanism</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/keytype.html" class="tsd-kind-icon">Key<wbr>Type</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/mechparams.html" class="tsd-kind-icon">Mech<wbr>Params</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/mechanismenum.html" class="tsd-kind-icon">Mechanism<wbr>Enum</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/mechanismflag.html" class="tsd-kind-icon">Mechanism<wbr>Flag</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/objectclass.html" class="tsd-kind-icon">Object<wbr>Class</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/rsamgf.html" class="tsd-kind-icon">Rsa<wbr>Mgf</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/sessionflag.html" class="tsd-kind-icon">Session<wbr>Flag</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/slotflag.html" class="tsd-kind-icon">Slot<wbr>Flag</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/tokenflag.html" class="tsd-kind-icon">Token<wbr>Flag</a>
					</li>
					<li class=" tsd-kind-enum">
						<a href="enums/usertype.html" class="tsd-kind-icon">User<wbr>Type</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/aescbcencryptdataparams.html" class="tsd-kind-icon">Aes<wbr>Cbc<wbr>Encrypt<wbr>Data<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/aescbcparams.html" class="tsd-kind-icon">Aes<wbr>Cbc<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/aesccmparams.html" class="tsd-kind-icon">Aes<wbr>Ccm<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/aesgcm240params.html" class="tsd-kind-icon">Aes<wbr>Gcm240<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/aesgcmparams.html" class="tsd-kind-icon">Aes<wbr>Gcm<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/attributecertificate.html" class="tsd-kind-icon">Attribute<wbr>Certificate</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/baseobject.html" class="tsd-kind-icon">Base<wbr>Object</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/certificate.html" class="tsd-kind-icon">Certificate</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/cipher.html" class="tsd-kind-icon">Cipher</a>
					</li>
					<li class=" tsd-kind-class tsd-has-type-parameter">
						<a href="classes/collection.html" class="tsd-kind-icon">Collection</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/data.html" class="tsd-kind-icon">Data</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/decipher.html" class="tsd-kind-icon">Decipher</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/digest.html" class="tsd-kind-icon">Digest</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/domainparameters.html" class="tsd-kind-icon">Domain<wbr>Parameters</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/ecdhparams.html" class="tsd-kind-icon">Ecdh<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/handleobject.html" class="tsd-kind-icon">Handle<wbr>Object</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/key.html" class="tsd-kind-icon">Key</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mechanism.html" class="tsd-kind-icon">Mechanism</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/mechanismcollection.html" class="tsd-kind-icon">Mechanism<wbr>Collection</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/module.html" class="tsd-kind-icon">Module</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/namedcurve.html" class="tsd-kind-icon">Named<wbr>Curve</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/privatekey.html" class="tsd-kind-icon">Private<wbr>Key</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/publickey.html" class="tsd-kind-icon">Public<wbr>Key</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/rsaoaepparams.html" class="tsd-kind-icon">Rsa<wbr>Oaep<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/rsapssparams.html" class="tsd-kind-icon">Rsa<wbr>Pss<wbr>Params</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/secretkey.html" class="tsd-kind-icon">Secret<wbr>Key</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/session.html" class="tsd-kind-icon">Session</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/sessionobject.html" class="tsd-kind-icon">Session<wbr>Object</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/sessionobjectcollection.html" class="tsd-kind-icon">Session<wbr>Object<wbr>Collection</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/sessionobjectfactory.html" class="tsd-kind-icon">Session<wbr>Object<wbr>Factory</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/sign.html" class="tsd-kind-icon">Sign</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/slot.html" class="tsd-kind-icon">Slot</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/slotcollection.html" class="tsd-kind-icon">Slot<wbr>Collection</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/storage.html" class="tsd-kind-icon">Storage</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/template.html" class="tsd-kind-icon">Template</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/token.html" class="tsd-kind-icon">Token</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/verify.html" class="tsd-kind-icon">Verify</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/wtlscertificate.html" class="tsd-kind-icon">Wtls<wbr>Certificate</a>
					</li>
					<li class=" tsd-kind-class">
						<a href="classes/x509certificate.html" class="tsd-kind-icon">X509<wbr>Certificate</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/ialgorithm.html" class="tsd-kind-icon">IAlgorithm</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/ikeypair.html" class="tsd-kind-icon">IKey<wbr>Pair</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/inamedcurve.html" class="tsd-kind-icon">INamed<wbr>Curve</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/iparams.html" class="tsd-kind-icon">IParams</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/itemplate.html" class="tsd-kind-icon">ITemplate</a>
					</li>
					<li class=" tsd-kind-interface">
						<a href="interfaces/sessionobjectfactoryitem.html" class="tsd-kind-icon">Session<wbr>Object<wbr>Factory<wbr>Item</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#attributeitemtype" class="tsd-kind-icon">Attribute<wbr>Item<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#handle" class="tsd-kind-icon">Handle</a>
					</li>
					<li class=" tsd-kind-type-alias tsd-has-type-parameter">
						<a href="modules.html#handleobjectconstructor" class="tsd-kind-icon">Handle<wbr>Object<wbr>Constructor</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#mechanismtype" class="tsd-kind-icon">Mechanism<wbr>Type</a>
					</li>
					<li class=" tsd-kind-type-alias">
						<a href="modules.html#sessionobjectfactoryitemcallback" class="tsd-kind-icon">Session<wbr>Object<wbr>Factory<wbr>Item<wbr>Callback</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#attribute" class="tsd-kind-icon">attribute</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#datefromstring" class="tsd-kind-icon">date<wbr>From<wbr>String</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#enumerable" class="tsd-kind-icon">enumerable</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isarray" class="tsd-kind-icon">is<wbr>Array</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isboolean" class="tsd-kind-icon">is<wbr>Boolean</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isempty" class="tsd-kind-icon">is<wbr>Empty</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isflag" class="tsd-kind-icon">is<wbr>Flag</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isfunction" class="tsd-kind-icon">is<wbr>Function</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isnull" class="tsd-kind-icon">is<wbr>Null</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isnumber" class="tsd-kind-icon">is<wbr>Number</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isobject" class="tsd-kind-icon">is<wbr>Object</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isstring" class="tsd-kind-icon">is<wbr>String</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#isundefined" class="tsd-kind-icon">is<wbr>Undefined</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#registerattribute" class="tsd-kind-icon">register<wbr>Attribute</a>
					</li>
					<li class=" tsd-kind-function">
						<a href="modules.html#removepadding" class="tsd-kind-icon">remove<wbr>Padding</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>